<div class="col s12 tag-div">
  <div class="tag-list">
    {% for tag in site.tags %}
    {% capture tag_slug %}{{ tag[0] | slugify }}{% endcapture %}
    {% capture test %}{{tag[0] | slice: 0}}{% endcapture %}
    {% capture testup %}{{tag[0] | slice: 0 | upcase}}{% endcapture %}
    <a class="tag-chip" href="#{{ tag_slug }}{% if test == testup %}_cap{% endif %}">
      <div class="chip z-depth-1">{{ tag[0] }}</div>
    </a>
    {% endfor %}
  </div>

  <div class="filter-controls" style="margin-top: 15px; margin-bottom: 15px;">
    <span style="margin-right: 10px; font-weight: bold;">筛选:</span>
    {% for tag in site.tags %}
    {% capture tag_slug %}{{ tag[0] | slugify }}{% endcapture %}
    <button class="btn-flat filter-button waves-effect" data-filter="{{ tag_slug }}">
      {{ tag[0] }}
    </button>
    {% endfor %}
    <button class="btn-flat filter-button waves-effect active" data-filter="all">
       显示全部
    </button>
  </div>

  <div class="divider"></div>

  <div class="tag-index">
    {% for tag in site.tags %}
    {% capture tag_slug %}{{ tag[0] | slugify }}{% endcapture %}
    {% capture test %}{{tag[0] | slice: 0}}{% endcapture %}
    {% capture testup %}{{tag[0] | slice: 0 | upcase}}{% endcapture %}
    <div class="tag-section" data-tag="{{ tag_slug }}">
      <h4 id="{{ tag_slug }}{% if test == testup %}_cap{% endif %}">{{ tag[0] }}</h4>
      <ul class="tag-post">
        {% for post in tag[1] %}
        <a class="post-title" href="{{site.baseurl}}{{post.url}}" target="_blank">
          <li>
            {{post.title}}
            <small class="post-date">{{post.date | date_to_string}}</small>
          </li>
        </a>
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
  </div>
</div>